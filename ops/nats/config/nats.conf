# NATS Server Configuration for Anumate Event Bus

# Server Settings
server_name: "anumate-nats"
listen: 0.0.0.0:4222
http_port: 8222

# Logging
log_file: "/dev/stdout"
logtime: true
debug: false
trace: false

# Limits
max_connections: 1000
max_control_line: 4096
max_payload: 1048576
max_pending: 67108864
max_subscriptions: 0

# Ping settings
ping_interval: "2m"
ping_max: 2

# Write deadline
write_deadline: "10s"

# JetStream Configuration for persistent messaging
jetstream: {
    # Store directory
    store_dir: "/data/jetstream"
    
    # Memory and file storage limits
    max_memory_store: 256MB
    max_file_store: 2GB
    
    # Domain for multi-tenancy
    domain: "anumate"
}

# Accounts for multi-tenancy (basic setup)
accounts: {
    # System account
    SYS: {
        users: [
            {user: "sys", password: "sys_password"}
        ]
    }
    
    # Application account
    APP: {
        users: [
            {user: "anumate_app", password: "app_password"}
        ]
        
        # JetStream limits per account
        jetstream: {
            max_memory: 128MB
            max_file: 1GB
            max_streams: 100
            max_consumers: 1000
        }
    }
}

# System account
system_account: "SYS"

# Monitoring
monitor_port: 8222

# Cluster configuration (disabled for single node)
# cluster: {
#     name: "anumate-cluster"
#     listen: 0.0.0.0:6222
#     
#     # Authorization
#     authorization: {
#         user: "cluster_user"
#         password: "cluster_password"
#         timeout: 2
#     }
#     
#     # Routes for clustering (add other nodes in production)
#     routes: []
# }

# TLS Configuration (disabled for development)
# tls: {
#     cert_file: "/etc/nats/certs/server.crt"
#     key_file: "/etc/nats/certs/server.key"
#     ca_file: "/etc/nats/certs/ca.crt"
#     verify: true
#     timeout: 5
# }

# Resolver for account management
# resolver: URL(nats://sys:sys_password@localhost:4222)

# Gateway configuration for multi-region (production)
# gateway: {
#     name: "anumate-us-east-1"
#     listen: 0.0.0.0:7222
#     gateways: []
# }

# Leafnode configuration for edge connectivity
# leafnodes: {
#     listen: 0.0.0.0:7422
# }